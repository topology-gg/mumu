import "mocha";
import { expect } from "chai";
import minHash from "../helpers/minhash";

describe("Minhash", () => {
    it("should hash to the correct value", () => {
        let inputs = [
            640, 512, 513, 768, 256, 257, 641, 514, 769, 258, 259, 642, 515,
            770, 260, 643, 516, 517, 771, 261, 772, 128, 644, 384, 518, 773,
            262, 129, 645, 385, 774, 263, 130, 646, 386, 775, 131, 647, 387,
            519, 132, 133, 1280, 1281, 648, 388, 389, 390, 776, 134, 391, 392,
            777, 135, 136, 1282, 1283, 1284, 1285, 649, 896, 520, 393, 778, 264,
            265, 897, 521, 779, 137, 898, 522, 780, 138, 899, 523, 394, 781,
            266, 267, 900, 268, 1024, 524, 901, 139, 782, 395, 1286, 1287, 1288,
            902, 269, 783, 525, 1289, 903, 270, 1025, 526, 1290, 1291, 1292,
            1293, 904, 271, 396, 1026, 140, 527, 905, 272, 1027, 528, 906, 529,
            530, 531, 1028, 273, 274, 275, 907, 532, 141, 1029, 397, 276, 908,
            533, 534, 535, 536, 1030, 277, 278, 279, 280, 909, 537, 142, 1031,
            398, 281, 910, 282, 1032, 538, 911, 399, 1033, 539, 650, 143, 784,
            283, 1294, 1295, 1296, 1297, 912, 284, 1034, 540, 1298, 1299, 1300,
            1301, 913, 541, 785, 285, 1302, 1303, 1304, 1305, 914, 542, 786,
            286, 915, 144, 543, 1035, 287, 400, 916, 145, 1036, 401, 2048, 2560,
            2080, 2592, 2112, 2049, 3584, 3104, 3648, 2656, 2784, 3232, 2720,
            2176, 2752, 3136, 3200, 3264, 3296, 3744, 12304, 12320, 12289,
            12305, 12290, 12291, 12609, 12593, 12818, 12834, 12835, 13076,
            12294, 12293, 12343, 12342, 12612, 12596, 12336, 12321, 12307,
            12594, 12836, 12837, 13077, 13078, 13094, 13095, 13079, 12292,
            12341, 12595,
        ];
        let expected = [
            1126, 3, 233, 171, 184, 344, 25, 38, 2112, 51, 1016, 261, 192, 416,
            292, 14, 262, 365, 278, 14,
        ];
        expect(expected).deep.equal(minHash(inputs));
    });
});
